<template>
  <b-container class="register">

    <header id="register-header">
      <h1 class="register-logo">ğŸŒ±</h1>
      <h1 class="register-title">íšŒì›ê°€ì…</h1>
    </header>

    <form id="register-form" @submit.prevent="submitForm">
      <b-form-group id="input-group-id">
        <label for="input-id">ì•„ì´ë””</label>
        <b-form-input
          id="input-id"
          v-model="userid"
          type="text"
          placeholder="ì•„ì´ë””"
          required />
      </b-form-group>

      <b-form-group id="input-group-username">
        <label for="input-username">ì´ë¦„</label>
        <b-form-input 
          id="input-username"
          v-model="username"
          type="text"
          placeholder="ì´ë¦„"
          required />
      </b-form-group>

      <b-form-group id="input-group-email">
        <label for="input-email">ì´ë©”ì¼</label>
        <b-form-input
          id="input-email"
          v-model="email"
          type="email"
          placeholder="ì´ë©”ì¼"
          required />
      </b-form-group>

      <b-form-group id="input-group-password">
        <label for="input-password">ë¹„ë°€ë²ˆí˜¸</label>
        <b-form-input
          id="input-password"
          v-model="password"
          type="password"
          placeholder="ë¹„ë°€ë²ˆí˜¸"
          required />
      </b-form-group>

      <b-form-group id="input-group-password-again">
        <label for="input-password-again">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
        <b-form-input
          id="input-password-again"
          v-model="passwordAgain"
          type="password"
          placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸"
          required />
      </b-form-group>

      <button
        class="register-form-btn"
        type="submit"
      >ê°€ì…í•˜ê¸°</button>
    </form>

    <p class="info-login">
      ì´ë¯¸ ì•„ì´ë””ê°€ ìˆìœ¼ì‹ ê°€ìš”?
      <a class="link-login"
          href="/"
      >ë¡œê·¸ì¸</a>
    </p>
  </b-container>
</template>

<script>
import { registerUser } from '@/api/auth';

export default {
  name: "Register",
  data () {
    return {
      userid: '',
      username: '',
      email: '',
      password: '',
      passwordAgain: ''
    }
  },
  methods: {
    async submitForm () {
      try {
        const data = {
          username: this.userid,
          name: this.username,
          email: this.email,
          password: this.password,
          password2: this.passwordAgain
        }

        await registerUser(data)

        alert('íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!')

        this.$router.push({
          name: 'ApplyCenter'
        })
      } catch (err) {
        console.log(err)
      }
    }
  }
}
</script>

<style lang="scss" scoped>
.register {
  max-width: 600px;


  #register-header {
    text-align: center;
    padding: 2.5rem 0rem;
  }


  #register-form {
    margin-bottom: 20px;
  
    .form-group {
      margin-bottom: 10px;
    }

    label {
      font-size: 16px;
      font-weight: bold;
      margin: 0px 0px 8px 10px;
    }
    
    input {
      padding: 0.75rem 1.5rem;
      margin-bottom: 15px;
      border-radius: 30px;

      &:focus {
        border-color: $primary-color;
        outline: 0;
        box-shadow: 0 0 0 0.25rem #33d27b52;
        color: $primary-color;
      }
    }
  }
}

</style>